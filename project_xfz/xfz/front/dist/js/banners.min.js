function Banners(){}Banners.prototype.loadData=function(){var r=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a];r.createBannerItem(t)}}})},Banners.prototype.listenAddBannerEvent=function(){var n=this;$("#add-banner-btn").click(function(){6<=$(".banner-list-group").children().length?window.messageBox.showInfo("最多只能添加六张轮播图!"):n.createBannerItem()})},Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banners.prototype.addRemoveBannerEvent=function(e){e.find(".close-btn").click(function(){var n=e.attr("data-banner-id");e.remove(),n?xfzalert.alertConfirm({text:"您确定要删除这个轮播图吗?",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("轮播图删除成功!"))}})}}):e.remove()})},Banners.prototype.addSaveBannerEvent=function(t){var n=t.find(".save-btn"),r=t.find(".thumbnail"),i=t.find("input[name='priority']"),o=t.find("input[name='link_to']"),s=t.find("span[class='priority']"),c=t.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=r.attr("src"),e=i.val(),a=o.val();xfzajax.post({url:d,data:{image_url:n,priority:e,link_to:a,pk:c},success:function(n){200===n.code&&(c?window.messageBox.showSuccess("轮播图修改成功!"):(c=n.data.banner_id,t.attr("data-banner-id",c),window.messageBox.showSuccess("轮播图添加完成!")),s.text("优先级:"+e))}})})},Banners.prototype.createBannerItem=function(n){var e=this,a=template("banner-item"),t=$(".banner-list-group");bannerItem=null,n?(t.append(a),bannerItem=t.find(".banner-item:last")):(t.prepend(a),bannerItem=t.find(".banner-item:first")),e.addImageSelectEvent(bannerItem),e.addRemoveBannerEvent(bannerItem),e.addSaveBannerEvent(bannerItem)},Banners.prototype.run=function(){var n=this;n.listenAddBannerEvent(),n.addImageSelectEvent(),n.loadData()},$(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsImxvYWREYXRhIiwic2VsZiIsInRoaXMiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsImJhbm5lcnMiLCJpIiwibGVuZ3RoIiwiYmFubmVyIiwiY3JlYXRlQmFubmVySXRlbSIsImxpc3RlbkFkZEJhbm5lckV2ZW50IiwiJCIsImNsaWNrIiwiY2hpbGRyZW4iLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd0luZm8iLCJhZGRJbWFnZVNlbGVjdEV2ZW50IiwiYmFubmVySXRlbSIsImltYWdlIiwiZmluZCIsImltYWdlSW5wdXQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwicG9zdCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwiYXR0ciIsImFkZFJlbW92ZUJhbm5lckV2ZW50IiwiYmFubmVySWQiLCJyZW1vdmUiLCJ4ZnphbGVydCIsImFsZXJ0Q29uZmlybSIsInRleHQiLCJjb25maXJtQ2FsbGJhY2siLCJiYW5uZXJfaWQiLCJzaG93U3VjY2VzcyIsImFkZFNhdmVCYW5uZXJFdmVudCIsInNhdmVCdG4iLCJpbWFnZVRhZyIsInByaW9yaXR5VGFnIiwibGlua3RvVGFnIiwicHJpb3JpdHlTcGFuIiwiaW1hZ2VfdXJsIiwicHJpb3JpdHkiLCJ2YWwiLCJsaW5rX3RvIiwicGsiLCJ0cGwiLCJ0ZW1wbGF0ZSIsImJhbm5lckxpc3RHcm91cCIsInByZXBlbmQiLCJydW4iXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFdBSVRBLFFBQVFDLFVBQVVDLFNBQVcsV0FDekIsSUFBSUMsRUFBT0MsS0FDWEMsUUFBUUMsSUFBSSxDQUNSQyxJQUFNLG9CQUNOQyxRQUFVLFNBQVVDLEdBQ2hCLEdBQXNCLE1BQW5CQSxFQUFhLEtBRVosSUFEQSxJQUFJQyxFQUFVRCxFQUFhLEtBQ2xCRSxFQUFFLEVBQUVBLEVBQUVELEVBQVFFLE9BQU9ELElBQUksQ0FDOUIsSUFBSUUsRUFBU0gsRUFBUUMsR0FDckJSLEVBQUtXLGlCQUFpQkQsUUFPMUNiLFFBQVFDLFVBQVVjLHFCQUF1QixXQUNyQyxJQUFJWixFQUFPQyxLQUNFWSxFQUFFLG1CQUNSQyxNQUFNLFdBR0UsR0FGV0QsRUFBRSxzQkFDS0UsV0FBV04sT0FFcENPLE9BQU9DLFdBQVdDLFNBQVMsZ0JBRy9CbEIsRUFBS1csc0JBSWJkLFFBQVFDLFVBQVVxQixvQkFBc0IsU0FBU0MsR0FDN0MsSUFBSUMsRUFBUUQsRUFBV0UsS0FBSyxjQUN4QkMsRUFBYUgsRUFBV0UsS0FBSyxnQkFFakNELEVBQU1QLE1BQU0sV0FDUlMsRUFBV1QsVUFHZlMsRUFBV0MsT0FBTyxXQUNkLElBQUlDLEVBQU94QixLQUFLeUIsTUFBTSxHQUNsQkMsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFPSixHQUN2QnZCLFFBQVE0QixLQUFLLENBQ1QxQixJQUFNLG9CQUNOMkIsS0FBT0osRUFDUEssYUFBYyxFQUNkQyxhQUFjLEVBQ2Q1QixRQUFVLFNBQVVDLEdBQ2hCLEdBQXNCLE1BQW5CQSxFQUFhLEtBQVUsQ0FDdEIsSUFBSUYsRUFBTUUsRUFBYSxLQUFPLElBQzlCZSxFQUFNYSxLQUFLLE1BQU05QixVQVFyQ1AsUUFBUUMsVUFBVXFDLHFCQUF1QixTQUFTZixHQUMvQkEsRUFBV0UsS0FBSyxjQUN0QlIsTUFBTSxXQUNYLElBQUlzQixFQUFXaEIsRUFBV2MsS0FBSyxrQkFDL0JkLEVBQVdpQixTQUNSRCxFQUNDRSxTQUFTQyxhQUFhLENBQ2xCQyxLQUFPLGdCQUNQQyxnQkFBa0IsV0FDZHZDLFFBQVE0QixLQUFLLENBQ1QxQixJQUFNLHNCQUNOMkIsS0FBTyxDQUNIVyxVQUFZTixHQUVoQi9CLFFBQVUsU0FBVUMsR0FDTSxNQUFuQkEsRUFBYSxPQUNaYyxFQUFXaUIsU0FDWHJCLE9BQU9DLFdBQVcwQixZQUFZLG1CQU9sRHZCLEVBQVdpQixZQU12QnhDLFFBQVFDLFVBQVU4QyxtQkFBcUIsU0FBU3hCLEdBQzVDLElBQUl5QixFQUFVekIsRUFBV0UsS0FBSyxhQUMxQndCLEVBQVcxQixFQUFXRSxLQUFLLGNBQzNCeUIsRUFBYzNCLEVBQVdFLEtBQUssMEJBQzlCMEIsRUFBWTVCLEVBQVdFLEtBQUsseUJBQzVCMkIsRUFBZTdCLEVBQVdFLEtBQUssMEJBQy9CYyxFQUFXaEIsRUFBV2MsS0FBSyxrQkFDM0I5QixFQUFNLEdBRU5BLEVBRERnQyxFQUNPLG9CQUVBLG1CQUVWUyxFQUFRL0IsTUFBTSxXQUNWLElBQUlvQyxFQUFZSixFQUFTWixLQUFLLE9BQzFCaUIsRUFBV0osRUFBWUssTUFDdkJDLEVBQVVMLEVBQVVJLE1BQ3hCbEQsUUFBUTRCLEtBQUssQ0FDVDFCLElBQU1BLEVBQ04yQixLQUFPLENBQ0htQixVQUFZQSxFQUNaQyxTQUFXQSxFQUNYRSxRQUFVQSxFQUNWQyxHQUFLbEIsR0FFVC9CLFFBQVUsU0FBVUMsR0FDTSxNQUFuQkEsRUFBYSxPQUNUOEIsRUFDQ3BCLE9BQU9DLFdBQVcwQixZQUFZLGFBRTlCUCxFQUFXOUIsRUFBYSxLQUFhLFVBQ3JDYyxFQUFXYyxLQUFLLGlCQUFpQkUsR0FDakNwQixPQUFPQyxXQUFXMEIsWUFBWSxhQUVsQ00sRUFBYVQsS0FBSyxPQUFPVyxVQU83Q3RELFFBQVFDLFVBQVVhLGlCQUFtQixTQUFTRCxHQUMxQyxJQUFJVixFQUFPQyxLQUNQc0QsRUFBTUMsU0FBUyxlQUNmQyxFQUFrQjVDLEVBQUUsc0JBQ3hCTyxXQUFhLEtBQ1ZWLEdBQ0MrQyxFQUFnQjVCLE9BQU8wQixHQUN2Qm5DLFdBQWFxQyxFQUFnQm5DLEtBQUssdUJBRWxDbUMsRUFBZ0JDLFFBQVFILEdBQ3hCbkMsV0FBYXFDLEVBQWdCbkMsS0FBSyx1QkFFdEN0QixFQUFLbUIsb0JBQW9CQyxZQUN6QnBCLEVBQUttQyxxQkFBcUJmLFlBQzFCcEIsRUFBSzRDLG1CQUFtQnhCLGFBRzVCdkIsUUFBUUMsVUFBVTZELElBQU0sV0FDcEIsSUFBSTNELEVBQU9DLEtBQ1hELEVBQUtZLHVCQUNMWixFQUFLbUIsc0JBQ0xuQixFQUFLRCxZQUdUYyxFQUFFLFlBQ2dCLElBQUloQixTQUNWOEQiLCJmaWxlIjoiYmFubmVycy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBCYW5uZXJzKCkge1xyXG4gICAgXHJcbn1cclxuXHJcbkJhbm5lcnMucHJvdG90eXBlLmxvYWREYXRhID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAndXJsJzonL2Ntcy9iYW5uZXJfbGlzdC8nLFxyXG4gICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhbm5lcnMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MDtpPGJhbm5lcnMubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhbm5lciA9IGJhbm5lcnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jcmVhdGVCYW5uZXJJdGVtKGJhbm5lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkJhbm5lcnMucHJvdG90eXBlLmxpc3RlbkFkZEJhbm5lckV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBhZGRCdG4gPSAkKCcjYWRkLWJhbm5lci1idG4nKTtcclxuICAgIGFkZEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJhbm5lckxpc3RHcm91cCA9ICQoJy5iYW5uZXItbGlzdC1ncm91cCcpO1xyXG4gICAgICAgIHZhciBsZW5ndGggPSBiYW5uZXJMaXN0R3JvdXAuY2hpbGRyZW4oKS5sZW5ndGg7XHJcbiAgICAgICAgaWYobGVuZ3RoPj02KXtcclxuICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0luZm8oJ+acgOWkmuWPquiDvea3u+WKoOWFreW8oOi9ruaSreWbviEnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmNyZWF0ZUJhbm5lckl0ZW0oKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUuYWRkSW1hZ2VTZWxlY3RFdmVudCA9IGZ1bmN0aW9uKGJhbm5lckl0ZW0pe1xyXG4gICAgdmFyIGltYWdlID0gYmFubmVySXRlbS5maW5kKFwiLnRodW1ibmFpbFwiKTtcclxuICAgIHZhciBpbWFnZUlucHV0ID0gYmFubmVySXRlbS5maW5kKCcuaW1hZ2UtaW5wdXQnKTtcclxuICAgIC8v5Zu+54mH5piv5LiN6IO95aSf5omT5byA5paH5Lu26YCJ5oup5qGG55qE77yM5Y+q6IO96YCa6L+HaW5wdXRbdHlwZT0nZmlsZSddXHJcbiAgICBpbWFnZS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaW1hZ2VJbnB1dC5jbGljaygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaW1hZ2VJbnB1dC5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXTtcclxuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJmaWxlXCIsZmlsZSk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6Jy9jbXMvdXBsb2FkX2ZpbGUvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOmZvcm1EYXRhLFxyXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOmZhbHNlLFxyXG4gICAgICAgICAgICAnY29udGVudFR5cGUnOmZhbHNlLFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5hdHRyKCdzcmMnLHVybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG5cclxufTtcclxuXHJcbkJhbm5lcnMucHJvdG90eXBlLmFkZFJlbW92ZUJhbm5lckV2ZW50ID0gZnVuY3Rpb24oYmFubmVySXRlbSl7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSBiYW5uZXJJdGVtLmZpbmQoJy5jbG9zZS1idG4nKTtcclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYmFubmVySWQgPSBiYW5uZXJJdGVtLmF0dHIoJ2RhdGEtYmFubmVyLWlkJyk7XHJcbiAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcclxuICAgICAgICBpZihiYW5uZXJJZCl7XHJcbiAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0Q29uZmlybSh7XHJcbiAgICAgICAgICAgICAgICAndGV4dCc6J+aCqOehruWumuimgeWIoOmZpOi/meS4qui9ruaSreWbvuWQlz8nLFxyXG4gICAgICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6ZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd1cmwnOicvY21zL2RlbGV0ZV9iYW5uZXIvJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiYW5uZXJfaWQnOmJhbm5lcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn6L2u5pKt5Zu+5Yig6Zmk5oiQ5YqfIScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5hZGRTYXZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbihiYW5uZXJJdGVtKXtcclxuICAgIHZhciBzYXZlQnRuID0gYmFubmVySXRlbS5maW5kKCcuc2F2ZS1idG4nKTtcclxuICAgIHZhciBpbWFnZVRhZyA9IGJhbm5lckl0ZW0uZmluZCgnLnRodW1ibmFpbCcpO1xyXG4gICAgdmFyIHByaW9yaXR5VGFnID0gYmFubmVySXRlbS5maW5kKFwiaW5wdXRbbmFtZT0ncHJpb3JpdHknXVwiKTtcclxuICAgIHZhciBsaW5rdG9UYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdsaW5rX3RvJ11cIik7XHJcbiAgICB2YXIgcHJpb3JpdHlTcGFuID0gYmFubmVySXRlbS5maW5kKFwic3BhbltjbGFzcz0ncHJpb3JpdHknXVwiKTtcclxuICAgIHZhciBiYW5uZXJJZCA9IGJhbm5lckl0ZW0uYXR0cihcImRhdGEtYmFubmVyLWlkXCIpO1xyXG4gICAgdmFyIHVybCA9ICcnO1xyXG4gICAgaWYoYmFubmVySWQpe1xyXG4gICAgICAgIHVybCA9ICcvY21zL2VkaXRfYmFubmVyLyc7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICB1cmwgPSAnL2Ntcy9hZGRfYmFubmVyLyc7XHJcbiAgICB9XHJcbiAgICBzYXZlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW1hZ2VfdXJsID0gaW1hZ2VUYWcuYXR0cignc3JjJyk7XHJcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gcHJpb3JpdHlUYWcudmFsKCk7XHJcbiAgICAgICAgdmFyIGxpbmtfdG8gPSBsaW5rdG9UYWcudmFsKCk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6dXJsLFxyXG4gICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgJ2ltYWdlX3VybCc6aW1hZ2VfdXJsLFxyXG4gICAgICAgICAgICAgICAgJ3ByaW9yaXR5Jzpwcmlvcml0eSxcclxuICAgICAgICAgICAgICAgICdsaW5rX3RvJzpsaW5rX3RvLFxyXG4gICAgICAgICAgICAgICAgJ3BrJzpiYW5uZXJJZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGJhbm5lcklkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+i9ruaSreWbvuS/ruaUueaIkOWKnyEnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJJZCA9IHJlc3VsdFsnZGF0YSddWydiYW5uZXJfaWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcsYmFubmVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2VzcyhcIui9ruaSreWbvua3u+WKoOWujOaIkCFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5U3Bhbi50ZXh0KFwi5LyY5YWI57qnOlwiK3ByaW9yaXR5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxufTtcclxuXHJcbkJhbm5lcnMucHJvdG90eXBlLmNyZWF0ZUJhbm5lckl0ZW0gPSBmdW5jdGlvbihiYW5uZXIpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHRwbCA9IHRlbXBsYXRlKFwiYmFubmVyLWl0ZW1cIik7XHJcbiAgICB2YXIgYmFubmVyTGlzdEdyb3VwID0gJChcIi5iYW5uZXItbGlzdC1ncm91cFwiKTtcclxuICAgIGJhbm5lckl0ZW0gPSBudWxsO1xyXG4gICAgaWYoYmFubmVyKXtcclxuICAgICAgICBiYW5uZXJMaXN0R3JvdXAuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgYmFubmVySXRlbSA9IGJhbm5lckxpc3RHcm91cC5maW5kKFwiLmJhbm5lci1pdGVtOmxhc3RcIik7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBiYW5uZXJMaXN0R3JvdXAucHJlcGVuZCh0cGwpO1xyXG4gICAgICAgIGJhbm5lckl0ZW0gPSBiYW5uZXJMaXN0R3JvdXAuZmluZChcIi5iYW5uZXItaXRlbTpmaXJzdFwiKTtcclxuICAgIH1cclxuICAgIHNlbGYuYWRkSW1hZ2VTZWxlY3RFdmVudChiYW5uZXJJdGVtKTtcclxuICAgIHNlbGYuYWRkUmVtb3ZlQmFubmVyRXZlbnQoYmFubmVySXRlbSk7XHJcbiAgICBzZWxmLmFkZFNhdmVCYW5uZXJFdmVudChiYW5uZXJJdGVtKTtcclxufTtcclxuXHJcbkJhbm5lcnMucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuQWRkQmFubmVyRXZlbnQoKTtcclxuICAgIHNlbGYuYWRkSW1hZ2VTZWxlY3RFdmVudCgpO1xyXG4gICAgc2VsZi5sb2FkRGF0YSgpO1xyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYmFubmVycyA9IG5ldyBCYW5uZXJzKCk7XHJcbiAgICBiYW5uZXJzLnJ1bigpO1xyXG59KTsiXX0=
